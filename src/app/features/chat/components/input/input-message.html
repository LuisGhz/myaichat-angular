<div class="p-4 pb-6">
  <div class="max-w-3xl mx-auto">
    <div class="flex items-end gap-2 bg-dark-input rounded-2xl p-3 border border-dark-border">
      <button
        class="app-text hover:bg-gray-500! dark:hover:bg-dark-base! rounded-full p-1 w-10 h-10 cursor-pointer trans-c-200 flex items-center justify-center"
        type="button"
        title="Attach"
        aria-label="Attach element"
      >
        <nz-icon class="text-xl" nzType="plus" nzTheme="outline" />
      </button>

      <textarea
        class="flex-1 bg-transparent! border-none! app-text resize-none focus:shadow-none! hidden-scrollbar"
        nz-input
        [(ngModel)]="messageText"
        (keydown)="onKeydown($event)"
        placeholder="Ask anything"
        [nzAutosize]="{ minRows: 1, maxRows: 6 }"
      ></textarea>

      <div class="flex items-center gap-1 shrink-0">
        <button
          class="app-text hover:bg-gray-500! dark:hover:bg-dark-base! rounded-full p-1 w-10 h-10 cursor-pointer trans-c-200 flex items-center justify-center"
          type="button"
          title="Record audio"
          aria-label="Record audio"
        >
          <nz-icon class="text-xl" nzType="audio" nzTheme="outline" />
        </button>
        @if (messageText().trim().length > 0) {
          <button
            class="app-text hover:bg-gray-500! dark:hover:bg-dark-base! rounded-full p-1 w-10 h-10 cursor-pointer trans-c-200 flex items-center justify-center"
            type="button"
            title="Send message"
            aria-label="Send message"
            (click)="onSend()"
          >
            <nz-icon class="text-xl" nzType="send" nzTheme="outline" />
          </button>
        }
      </div>
    </div>

    <p class="text-center text-xs text-gray-500 mt-2">
      AI can make mistakes. Check important info.
    </p>
  </div>
</div>
