<div class="relative">
  <button
    class="app-text-buttons hover:bg-gray-300! dark:hover:bg-dark-base! rounded-full p-1 w-10 h-10 cursor-pointer trans-c-200 flex items-center justify-center"
    type="button"
    title="More options"
    aria-label="More options menu"
    (click)="toggleMenu()"
  >
    <nz-icon class="text-xl" nzType="plus" nzTheme="outline" />
  </button>

  @if (isMenuOpen()) {
    <nav
      class="absolute bottom-full left-0 mb-2 bg-[#2d2d2d] rounded-2xl shadow-2xl py-2 min-w-[220px] z-50"
      role="menu"
      aria-label="Options menu"
    >
      <ul class="list-none m-0 p-0">
        @for (option of menuOptions(); track option.label) {
          <li>
            <button
              class="w-full flex items-center gap-3 px-4 py-2.5 app-text hover:bg-[#3d3d3d] cursor-pointer bg-transparent border-none text-left"
              type="button"
              role="menuitem"
              (click)="onOptionClick(option)"
            >
              <nz-icon class="text-base" [nzType]="option.icon" nzTheme="outline" />
              <span class="text-sm">{{ option.label }}</span>
            </button>
          </li>
        }
      </ul>
    </nav>
  }
  <app-advanced-settings
    [isVisible]="isAdvancedSettingsVisible()"
    (closeModal)="closeAdvancedSettings()"
  />
</div>
