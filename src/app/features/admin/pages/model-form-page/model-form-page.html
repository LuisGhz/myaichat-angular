<div class="flex flex-col h-full">
  <!-- Form Container -->
  <div class="flex-1 overflow-y-auto p-4 thin-scrollbar">
    <form nz-form [formGroup]="form" (ngSubmit)="onSubmit()" class="max-w-4xl mx-auto">
      <!-- Basic Information Section -->
      <div class="app-bg-base rounded-lg p-4 sm:p-6 mb-4 border app-border-input">
        <h2 class="text-lg font-semibold app-text mb-4">Basic Information</h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <!-- Name -->
          <nz-form-item>
            <nz-form-label nzRequired>Name</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid name (max 100 characters)">
              <input
                nz-input
                formControlName="name"
                placeholder="GPT-4 Turbo"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Short Name -->
          <nz-form-item>
            <nz-form-label nzRequired>Short Name</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid short name (max 20 characters)">
              <input
                nz-input
                formControlName="shortName"
                placeholder="GPT-4T"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Value -->
          <nz-form-item>
            <nz-form-label nzRequired>Value</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid value (max 100 characters)">
              <input
                nz-input
                formControlName="value"
                placeholder="gpt-4-turbo"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Link -->
          <nz-form-item>
            <nz-form-label nzRequired>Documentation Link</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid URL">
              <input
                nz-input
                formControlName="link"
                placeholder="https://platform.openai.com/docs"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Guest Access -->
          <nz-form-item>
            <nz-form-label nzRequired>Guest Access</nz-form-label>
            <nz-form-control nzErrorTip="Please specify if guest access is allowed">
              <nz-select
                formControlName="guestAccess"
                class="app-bg-input! app-border-input! app-text!"
              >
                <nz-option [nzValue]="true" nzLabel="Yes"></nz-option>
                <nz-option [nzValue]="false" nzLabel="No"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <!-- Pricing Section -->
      <div
        class="app-bg-base rounded-lg p-4 sm:p-6 mb-4 border app-border-input"
        formGroupName="price"
      >
        <h2 class="text-lg font-semibold app-text mb-4">Pricing</h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <!-- Input Price -->
          <nz-form-item>
            <nz-form-label nzRequired>Input Token Price</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid positive number">
              <input
                nz-input
                type="number"
                formControlName="input"
                placeholder="0.0001"
                step="0.0001"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Output Price -->
          <nz-form-item>
            <nz-form-label nzRequired>Output Token Price</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid positive number">
              <input
                nz-input
                type="number"
                formControlName="output"
                placeholder="0.0003"
                step="0.0001"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <!-- Metadata Section -->
      <div
        class="app-bg-base rounded-lg p-4 sm:p-6 mb-4 border app-border-input"
        formGroupName="metadata"
      >
        <h2 class="text-lg font-semibold app-text mb-4">Metadata</h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <!-- Context Window -->
          <nz-form-item>
            <nz-form-label nzRequired>Context Window</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid number (min 1)">
              <input
                nz-input
                type="number"
                formControlName="contextWindow"
                placeholder="128000"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Max Output Tokens -->
          <nz-form-item>
            <nz-form-label nzRequired>Max Output Tokens</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid number (min 1)">
              <input
                nz-input
                type="number"
                formControlName="maxOutputTokens"
                placeholder="4096"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>

          <!-- Knowledge Cutoff -->
          <nz-form-item class="sm:col-span-2">
            <nz-form-label nzRequired>Knowledge Cutoff</nz-form-label>
            <nz-form-control nzErrorTip="Please enter the knowledge cutoff date">
              <input
                nz-input
                formControlName="knowledgeCutoff"
                placeholder="April 2023"
                class="app-bg-input! app-border-input! app-text! placeholder:text-gray-500!"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <!-- Developer Section -->
      <div class="app-bg-base rounded-lg p-4 sm:p-6 mb-4 border app-border-input">
        <h2 class="text-lg font-semibold app-text mb-4">Developer</h2>

        <nz-form-item>
          <nz-form-label nzRequired>Select Developer</nz-form-label>
          <nz-form-control nzErrorTip="Please select a developer">
            <nz-select
              formControlName="developerId"
              nzPlaceHolder="Select a developer"
              nzShowSearch
              [nzLoading]="developers.isLoading()"
              class="w-full [&_.ant-select-selector]:app-bg-input! [&_.ant-select-selector]:app-border-input! [&_.ant-select-selection-item]:app-text! [&_.ant-select-selection-placeholder]:text-gray-500!"
            >
              @for (dev of developers.value(); track dev.id) {
                <nz-option [nzValue]="dev.id" [nzLabel]="dev.name"></nz-option>
              }
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>

      <!-- Form Actions -->
      <div class="flex items-center justify-end gap-2 sm:gap-4 mt-6">
        <button
          class="app-text px-5 py-2.5 app-bg-base app-hover-bg-base trans-c-200 rounded-lg cursor-pointer"
          type="button"
          (click)="onCancel()"
          [disabled]="isSubmitting()"
        >
          Cancel
        </button>
        <button
          class="app-text px-5 py-2.5 app-bg-base app-hover-bg-base trans-c-200 rounded-lg cursor-pointer"
          type="submit"
          [disabled]="isSubmitting()"
        >
          {{ isEditMode() ? 'Update' : 'Create' }} Model
        </button>
      </div>
    </form>
  </div>
</div>
